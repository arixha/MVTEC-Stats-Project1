obesitat <- read.csv("obesitat.csv")
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Swaziland", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czech Republic", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudia Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
healthSecurity <- read.csv("healthSecurity.csv")
setwd("/Users/rvpazos/Documents/mvtec/cross-module-assignment/MVTEC-Stats-Project1/Rscripts")
healthSecurity <- read.csv("healthSecurity.csv")
obesitat <- read.csv("obesitat.csv")
extra <- read_excel("country-info.xlsx")
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Swaziland", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czech Republic", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudia Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
filter(location %in% countries) %>%
subset(select  = c(iso_code, location, population, population_density, median_age, gdp_per_capita)) %>%
rename(popDensity = population_density, medianAge = median_age, gdp = gdp_per_capita)
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016")
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitat, c("location" = "Entity"))
View(extra_data)
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
View(obesitat)
View(obesitatSelect)
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
filter(location %in% countries) %>%
subset(select  = c(iso_code, location, population, population_density, median_age, gdp_per_capita)) %>%
rename(popDensity = population_density, medianAge = median_age, gdp = gdp_per_capita)
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016")
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
View(healthSecurity)
View(extra_data)
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
filter(location %in% countries) %>%
subset(distinct = c(iso_code, location, population, population_density, median_age, gdp_per_capita)) %>%
rename(popDensity = population_density, medianAge = median_age, gdp = gdp_per_capita)
View(owidSelect)
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
filter(location %in% countries) %>%
subset(select = c(iso_code, location, population, population_density, median_age, gdp_per_capita)) %>%
rename(popDensity = population_density, medianAge = median_age, gdp = gdp_per_capita)
View(owidSelect)
?subset
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
group_by(iso_code) %>%
filter(location %in% countries) %>%
subset(select = c(iso_code, location, population, population_density, median_age, gdp_per_capita)) %>%
rename(popDensity = population_density, medianAge = median_age, gdp = gdp_per_capita)
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
group_by(iso_code, location) %>%
filter(location %in% countries) %>%
summarise(population = first(population),
popDensity = first(population_density),
medianAge = first(median_age),
gdp = first(gdp_per_capita)) #%>%
mortality <- read.csv("mortality_causes.csv")
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
library(readr)
library(tidyverse)
library(readxl)
setwd("/Users/rvpazos/Documents/mvtec/cross-module-assignment/MVTEC-Stats-Project1/Rscripts")
#Read all external files
owid <- read.csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv")
extra <- read_excel("country-info.xlsx")
healthSecurity <- read.csv("healthSecurity.csv")
obesitat <- read.csv("obesitat.csv")
mortality <- read.csv("mortality_causes.csv")
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Swaziland", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czech Republic", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudia Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
group_by(iso_code, location) %>%
filter(location %in% countries) %>%
summarise(population = first(population),
popDensity = first(population_density),
medianAge = first(median_age),
gdp = first(gdp_per_capita))
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016")
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
View(extra_data)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
rename(obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
View(obesitatSelect)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
rename(obesity = Prevalence.of.obesity..both.sexes....WHO..2019.) %>%
summarise(iso_code = first(code), obesity = first(obesity))
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(iso_code = code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.))
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(code, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.) %>%
#Join all
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(code, Entity, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.) %>%
#Join all
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(code, Entity, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.) %>%
#Join all
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(code, Entity, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.) %>%
View(obesitatSelect)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(code, Entity, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(code, Entity, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
View(obesitat)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(Code, Entity, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = Code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("location" = "Entity"))
View(owidSelect)
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("iso_code" = "iso_code"))
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(Code, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = Code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("iso_code" = "iso_code"))
#export to CSV
write.csv(extra_data, file="extra_data.csv",
row.names=FALSE)
View(healthSecurity)
extra_data$location %in% healthSecurity$country
healthSecurity$country %in%  extra_data$location
View(owidSelect)
View(owid)
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Swaziland", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czech Republic", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudi Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
countries %in%  owidSelect$location
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Eswatini", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czechia", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudi Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
group_by(iso_code, location) %>%
filter(location %in% countries) %>%
summarise(population = first(population),
popDensity = first(population_density),
medianAge = first(median_age),
gdp = first(gdp_per_capita))
countries %in% owidSelect$location
countries %in% extraSelect$location
View(extra)
#Renaming some problematic countries
extra[extra == "Cabo Verde"] <- "Cape Verde"
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Eswatini", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czechia", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudi Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
countries %in% extraSelect$location
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
obesitatSelect <- obesitat %>%
filter(Entity %in% countries, Year == "2016") %>%
subset(select = c(Code, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = Code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
countries %in% extraSelect$location
extra[extra == "Czech Republic"] <- "Czechia"
extra[extra == "Bahamas, The"] <- "Bahamas"
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
countries %in% extraSelect$location
View(obesitatSelect)
obesitatFilter <- obesitat %>%
filter(Entity %in% countries, Year == "2016")
View(obesitatFilter)
countries %in% obesitatFilter$Entity
View(obesitatFilter)
View(obesitat)
obesitatFilter[obesitatFilter == "Swaziland"] <- "Eswatini"
obesitatFilter[obesitatFilter == "Czech Republic"] <- "Czechia"
obesitatSelect <- obesitatFilter %>%
subset(select = c(Code, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = Code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
countries %in% obesitatFilter$Entity
countries %in% obesitatSelect$Entity
#Creating extra_data file
library(readr)
library(tidyverse)
library(readxl)
setwd("/Users/rvpazos/Documents/mvtec/cross-module-assignment/MVTEC-Stats-Project1/Rscripts")
#Read all external files
owid <- read.csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv")
extra <- read_excel("country-info.xlsx")
healthSecurity <- read.csv("healthSecurity.csv")
obesitat <- read.csv("obesitat.csv")
mortality <- read.csv("mortality_causes.csv")
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Eswatini", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czechia", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudi Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
## Renaming some problematic countries
#extra
extra[extra == "Cabo Verde"] <- "Cape Verde"
extra[extra == "Czech Republic"] <- "Czechia"
extra[extra == "Bahamas, The"] <- "Bahamas"
#obesity
obesitat %>%
filter(Entity %in% countries, Year == "2016")
obesitat[obesitat == "Swaziland"] <- "Eswatini"
obesitat[obesitat == "Czech Republic"] <- "Czechia"
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
group_by(iso_code, location) %>%
filter(location %in% countries) %>%
summarise(population = first(population),
popDensity = first(population_density),
medianAge = first(median_age),
gdp = first(gdp_per_capita))
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
obesitatSelect <- obesitat %>%
subset(select = c(Code, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = Code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
#Join all
extra_data <- owidSelect %>%
inner_join(extraSelect, c("location" = "location")) %>%
inner_join(healthSecurity, c("location" = "country")) %>%
inner_join(obesitatSelect, c("iso_code" = "iso_code"))
#export to CSV
write.csv(extra_data, file="extra_data.csv",
row.names=FALSE)
#Checking all countries are found
countries %in% owidSelect$location
countries %in% extraSelect$location
countries %in% obesitat$Entity
View(obesitat)
#obesity
obesitat %>%
filter(Entity %in% countries, Year == "2016")
View(obesitatFilter)
obesitat[obesitat == "Czech Republic"] <- "Czechia"
#obesity
obesitat[obesitat == "Swaziland"] <- "Eswatini"
obesitat %>%
filter(Entity %in% countries, Year == "2016")
countries %in% obesitat$Entity
library(readr)
library(tidyverse)
library(readxl)
setwd("/Users/rvpazos/Documents/mvtec/cross-module-assignment/MVTEC-Stats-Project1/Rscripts")
#Read all external files
owid <- read.csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv")
extra <- read_excel("country-info.xlsx")
healthSecurity <- read.csv("healthSecurity.csv")
obesitat <- read.csv("obesitat.csv")
mortality <- read.csv("mortality_causes.csv")
#Set countries to filter to from pre-analysis here
countries = c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Eswatini", "Equatorial Guinea", "Morocco", "Namibia", "Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czechia", "Moldova", "Switzerland", "Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Saudi Arabia", "United Arab Emirates", "Panama", "United States", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala", "Chile", "Peru", "Brazil", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana", "Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu")
## Renaming some problematic countries
#extra
extra[extra == "Cabo Verde"] <- "Cape Verde"
extra[extra == "Czech Republic"] <- "Czechia"
extra[extra == "Bahamas, The"] <- "Bahamas"
#obesity
obesitat[obesitat == "Swaziland"] <- "Eswatini"
obesitat[obesitat == "Czech Republic"] <- "Czechia"
obesitat %>%
filter(Entity %in% countries, Year == "2016")
## Subset owid, extra data, obesitat, mortality, temperature to just the selected countries and columns
owidSelect <- owid %>%
group_by(iso_code, location) %>%
filter(location %in% countries) %>%
summarise(population = first(population),
popDensity = first(population_density),
medianAge = first(median_age),
gdp = first(gdp_per_capita))
extraSelect <- extra %>%
filter(COUNTRY %in% countries) %>%
subset(select = c(COUNTRY, Government_Type, Corruption_preception)) %>%
rename(location = COUNTRY, govt = Government_Type, corruption = Corruption_preception)
obesitatSelect <- obesitat %>%
subset(select = c(Code, Prevalence.of.obesity..both.sexes....WHO..2019.)) %>%
rename(iso_code = Code, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
View(owid)
View(obesitatSelect)
obesitat %>%
group_by(Year) %>%
filter(Entity %in% countries, Year == "2016")
View(obesitat)
obesitat %>%
group_by(Year) %>%
filter(Entity %in% countries) %>%
filter(Year == "2016")
obesitatFiltered = obesitat %>%
filter(Entity %in% countries, Year == "2016")
View(obesitatFiltered)
countries %in% obesitatFiltered$Entity
library(botor)
?botor
??botor
### PROJECT 1 Covid19 - Statistics
# @authors: Ànnia, Rebecca, Rocío, Victor.
############################################################
############ READING DATA FROM EXCEL/CSV COVID ############
############################################################
library(readr);
library(tidyverse);
data <- read.csv("https://mvtec-group2.s3-eu-west-1.amazonaws.com/rawdata/A_covidDaily.csv")
data <- rename(data, code = iso_code)
head(data)   # mostrar 10 1es files cada colm
names(data)  # mostrar nom columnes
# is R reading data correctly?
# Has dd the correct number of ROWS and COLUMNS?
dim(data)
# TIPO DE OBJETO DATOS
class(data)
#check table
#View(data)
#open access by name to columns
attach(data)
#?attach
#are all columns of expected types?
sapply(data, class)
# ens quedem amb les columnes que tenen menys NA's
apply(
is.na
(data), 2, mean)
# reduir la bd eliminant colm --> https://www.listendata.com/2015/06/r-keep-drop-columns-from-data-frame.html
data <- subset(data, select = c(code, continent, location, date, total_cases, total_cases_per_million, new_cases, reproduction_rate, total_deaths, total_deaths_per_million, new_deaths, hospital_beds_per_thousand, total_tests, total_tests_per_thousand, population, population_density, median_age, gdp_per_capita))
## dates ##
class(data$date)  # --> ha ser data i no caràcter
library(lubridate)
#data$date <- ymd(data$date)
data$date <- as.Date(data$date, format="%Y-%m-%d")
class(data$date)
# x saber quants NA hi ha per colm
apply(is.na(data), 2, sum) # 2 = columnes
############################################################
############        READING DATA OBESITY        ############
############################################################
ob <- read.csv("obesitat.csv")
sapply(ob, class)
# renaming columns
ob <- rename(ob, country = Entity, code = Code, year = Year, obesity = Prevalence.of.obesity..both.sexes....WHO..2019.)
# taking 2016 year values only
ob <- filter(ob, year==2016)
# removing some rows that don't serve
ob <- ob[!(ob$country=="Africa" | ob$country=="Americas" | ob$country=="Eastern Mediterranean" | ob$country=="Europe" | ob$country=="Global" | ob$country=="South-East Asia" | ob$country=="Western Pacific"),]
head(ob)
ob <- subset(ob, select = -c(year))
############################################################
############   READING DATA CAUSES DEATH        ############
############################################################
dataDeaths <- read.csv("mortality_causes.csv")
#head(dataDeaths)
#View(dataDeaths)
# renaming columns and rows
dataDeaths <- rename(dataDeaths, location = Country, causes = Causes, numDeathsOther = Both.sexes)
dataDeaths$location [dataDeaths$location == "Cabo Verde"] <- "Cape Verde"
dataDeaths$location [dataDeaths$location == "United States of America"] <- "United States"
dataDeaths$location [dataDeaths$location == "Republic of Moldova"] <- "Moldova"
dataDeaths$location [dataDeaths$location == "Bolivia (Plurinational State of)"] <- "Bolivia"
#sapply(dataDeaths, class)
# removing column year
dataDeaths <- dataDeaths[,-2]
head(dataDeaths)
library(reshape2)
dataDeaths <- dcast(dataDeaths,location~causes)
head(dataDeaths)
#class(dataDeathsOk)
dataDeaths <- rename(dataDeaths, cardiovascular_deaths = "Cardiovascular diseases", pulmonary_deaths = "Chronic obstructive pulmonary disease", diabetes_deaths = "Diabetes mellitus", cancer_deaths = "Malignant neoplasms")
names(dataDeaths)
# top 10 countries
top10Deaths <- dataDeaths %>%
filter(location %in% c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Eswatini", "Equatorial Guinea", "Morocco", "Namibia",
"Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Georgia", "United Arab Emirates",
"Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czechia", "Moldova", "Switzerland",
"Panama", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala",
"Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu", "Samoa",
"Chile", "Peru", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana","Brazil","United States"))
head(top10Deaths)
top10Deaths <- rename(top10Deaths, country = location)
############################################################
############      READING DATA REBECCA          ############
############################################################
dataSecurity <- read.csv("healthSecurity.csv")
head(dataSecurity)
############################################################
############   READING DATA TEMPERATURE        ############
############################################################
dataTemp <- read.csv("temperatura.csv")
dataTemp <- subset(dataTemp, select = -c(X))
dataTemp <- rename(dataTemp, country = Country)
############################################################
############     JOIN COVID + ALL EXTRA DATA   ############
############################################################
# info countries extra - Karina#
library(readxl)    # x poder llegir arxiu, q és xlsx
pp <- read_excel("country-info.xlsx")
head(pp)
sapply(pp, class)
# seleccionar colm ok
pp <- subset(pp, select = c(COUNTRY, Government_Type, Corruption_preception))
# tmb es podria fer amb pp <- select(pp, COUNTRY, Government_Type, Corruption_preception)
# canviar nom colm
pp <- rename(pp, country = COUNTRY, gov = Government_Type, corruption = Corruption_preception)
# obesity + info paisos extra
obExtra <- left_join(ob, pp, by = "country")
head(obExtra)
extra <- left_join(top10Deaths, dataSecurity, by = "country")
extra <- left_join(extra, dataTemp, by = "country")
extra <- left_join(obExtra, extra, by = "country")
# top 10 countries extra
extra <- extra %>%
filter(country %in% c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Eswatini", "Equatorial Guinea", "Morocco", "Namibia",
"Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Georgia", "United Arab Emirates",
"Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czechia", "Moldova", "Switzerland",
"Panama", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala",
"Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu", "Samoa",
"Chile", "Peru", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana","Brazil","United States"))
# extra + covid data
dataOk <- left_join(data, extra, by = "code")
dataOk <- subset(dataOk, select = -c(country))
# dataOk = extra + covid
dataOk <- dataOk %>%
filter(location %in% c("Cape Verde", "South Africa", "Djibouti", "Sao Tome and Principe", "Libya", "Gabon", "Eswatini", "Equatorial Guinea", "Morocco", "Namibia",
"Qatar", "Bahrain", "Kuwait", "Armenia", "Israel", "Oman", "Maldives", "Singapore", "Georgia", "United Arab Emirates",
"Andorra", "San Marino", "Vatican", "Luxembourg", "Montenegro", "Belgium", "Spain", "Czechia", "Moldova", "Switzerland",
"Panama", "Costa Rica", "Dominican Republic", "Bahamas", "Honduras", "Mexico", "Belize", "Canada", "Guatemala",
"Australia", "New Zealand", "Marshall Islands", "Papua New Guinea", "Fiji", "Solomon Islands", "Vanuatu", "Samoa",
"Chile", "Peru", "Argentina", "Colombia", "Bolivia", "Ecuador", "Suriname", "Paraguay", "Guyana","Brazil","United States"))
write.csv(dataOk, file = "B-top10Data.csv")
library(aws.s3)
install.packages(aws.s3)
?aws.s3
??aws.s3
install.packages("aws.s3", repos = "https://cloud.R-project.org")
blist <- bucketlist()
library(aws.s3)
blist <- bucketlist()
View(extraSelect)
?Startup
df <- read.csv('B-top10Data.csv')
?Startup
?put_object
View(df)
?Startup
View(extra)
?predict
